<!DOCTYPE html>
<html>
<head>
	<title>DoubleJam</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet">
	{% load static %}
	<link rel="stylesheet" type="text/css" href="../static/css/style.css">
	<script src="https://smtpjs.com/v3/smtp.js"></script>
</head>
<body>
	<header>
		<div class="container">
		  <div class="logo">
			<img src="{% static 'imgs/logo_black.png' %}" alt="Logo">
		  </div>
		  <nav class="navigation">
			<ul>
			  <li><a href="#">Home</a></li>
			  <li><a href="#">Shop</a></li>
			  <li><a href="#">About</a></li>
			  <li><a href="#">Contact</a></li>
			</ul>
		  </nav>
		  <div class="cart" id="cart-icon">
			<a href="#" onclick="openCart()">
			  <img src="{% static 'imgs/basket-outline.svg' %}" alt="Cart">
			</a>
		  </div>					
		  <div class="heart">
			<a href="#">
			  <img src="{% static 'imgs/heart-outline.svg' %}" alt="Heart">
			</a>
		  </div>
		</div>
	  </header>
	  <section class="banner">
		<video autoplay muted loop id="bg-video">
		  <source src="{% static 'videos/video.mp4' %}" type="video/mp4">
		</video>
		<div class="container">
		  <h1>Welcome to Our Online Shop</h1>
		  <p>Shop for the latest fashion trends at affordable prices.</p>
		</div>
	  </section>
	  
	  
  <section class="products">
    <div class="container">
      <h2>Featured Products</h2>
      <div class="product-container">
        <div class="product">
          <img src="{% static 'imgs/tshort.png' %}" alt="Product">
          <h3>DJ Zoom Rival SD 2</h3>
          <p class="price">$99.99</p>
          <p>Dictator Miche is our favourite logo because we used it to name our project to first project for ICDIIS. It`s our special design.</p>
          <a href="#" class="add-to-cart" id="add-to-cart-1">Add to Cart</a>
        </div>
        <div class="product">
          <img src="{% static 'imgs/tshort1.png' %}" alt="Product">
          <h3>DJ Pro Dri-FIT</h3>
          <p class="price">$99.99</p>
          <p>You give your all to the workout, pushing yourself to the limit. Let the STM32 keep you cool and comfortable with its soft fabric.</p>
		  <a href="#" class="add-to-cart" id="add-to-cart-2">Add to Cart</a>
        </div>
        <div class="product">
          <img src="{% static 'imgs/new.png' %}" alt="Product">
          <h3>Backsideclub Overshot <JUNGLE></JUNGLE></h3>
          <p class="price">$399</p>
          <p>Italian brand of everyday classic Backsideclub. Straight cut. Adjustable cuffs and hem with buttons. Woven patch on the back. Made in Italy.</p>
          <a href="#" class="add-to-cart" id="add-to-cart-3">Add to Cart</a>
        </div>
        <div class="product">
          <img src="{% static 'imgs/hoody.png' %}" alt="Product">
          <h3>Han Kjobenhavn Hoodie</h3>
          <p class="price">$250</p>
          <p>Printed graphic artwork on the chest. Will complement your basic wardrobe.Original designer everyday item. Made in Portugal.</p>
          <a href="#" class="add-to-cart" id="add-to-cart-4">Add to Cart</a>
        </div>
      </div>
    </div>
  </section>
  <div class="cart-window">
	<div class="cart-items">
	  <!-- cart items will be dynamically added here -->
	</div>
	<div class="cart-footer">
	  <div class="cart-total">
		<h3>Total: $0.00</h3>
	  </div>
	  <button class="checkout-btn">Checkout</button>
	</div>
  </div>
  
  
  <section class="featured-categories">
		<div class="container" style="text-align: center;">
			<h2>Featured Categories</h2>
			<div class="category-container">
				<div class="category">
					<img src="{% static 'imgs/shoes.png' %}" alt="Category" style="transform: scale(-1, 1);">
					<h3>Boots Vomero 5</h3>
				</div>
				<div class="category">
					<img src="{% static 'imgs/shooes_purple.png' %}" alt="Category">
					<h3>Zoom Freak 4 ASW</h3>
				</div>
				<div class="category">
					<img src="{% static 'imgs/shoes1.png' %}" alt="Category" style="transform: scale(-1, 1);">
					<h3>Sneakers Y2OP</h3>
				</div>
			</div>
		</div>
	</section>
	

	<section class="newsletter">
		<div class="newsletter">
			<h2>Subscribe to our newsletter</h2>
			<p>Get the latest news and updates delivered to your inbox.</p>
			<div class="input-container">
				<form id="email-form">
				  <input type="email" placeholder="Enter your email address">
				  <button id="submit-btn" type="submit">Subscribe</button>
				</form>
			  </div>			  
		  </div>
	</section>

	<footer>
		<div class="container">
		  <div class="footer-social">
			<a href="#"><img src="{% static 'imgs/facebook.svg' %}	" alt="Facebook"></a>
			<a href="#"><img src="{% static 'imgs/twitter.svg' %}" alt="Twitter"></a>
			<a href="#"><img src="{% static 'imgs/instagram.svg' %}" alt="Instagram"></a>
		  </div>
		  <div class="footer-copyright">
			<p>&copy; 2023 Double Jam company. All rights reserved.</p>
		  </div>
		</div>
	</footer>		
</body>

<script src="https://cdn.emailjs.com/sdk/2.3.2/email.min.js"></script>
<script>
  (function(){
    emailjs.init('0YiBCPA5DC-_Qq3Ob');
  })();
  
  document.getElementById('email-form').addEventListener('submit', function(event) {
    event.preventDefault();
    // Collect form data
    const email = document.querySelector('#email-form input[type="email"]').value;

    // Send email
    const templateParams = {
      email: email
    };
    emailjs.send('service_orinrog', 'template_ar2eb0e', templateParams)
      .then(function(response) {
        console.log('SUCCESS!', response.status, response.text);
      }, function(error) {
        console.log('FAILED...', error);
      });
    document.querySelector('#email-form input[type="email"]').value = '';
  });

  function addToCart(event) {
	event.preventDefault(); // prevent the default link behavior
  
	// get the product details
	const product = event.target.parentNode;
	const title = product.querySelector("h3").textContent;
	const price = product.querySelector(".price").textContent;
  
	// create a cart item object
	const item = { title, price };
  
	// add the item to the cart (you can use localStorage or a server-side database)
	console.log("Adding item to cart:", item);
  }
  
  document.getElementById("add-to-cart-1").addEventListener("click", addToCart);
  document.getElementById("add-to-cart-2").addEventListener("click", addToCart);
  document.getElementById("add-to-cart-3").addEventListener("click", addToCart);
  document.getElementById("add-to-cart-4").addEventListener("click", addToCart);
  
  function openCart() {
	var cartWindow = document.querySelector('.cart-window');
	cartWindow.classList.toggle('open');
  }
  
  
</script>

<script>
    const cartItems = [];

    document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', () => {
            const productId = button.id.split('-')[3];
            const product = {
                id: productId,
                title: document.querySelector(`#add-to-cart-${productId}`).previousElementSibling.previousElementSibling.previousElementSibling.textContent,
                price: document.querySelector(`#add-to-cart-${productId}`).previousElementSibling.previousElementSibling.textContent,
                image: document.querySelector(`#add-to-cart-${productId}`).previousElementSibling.previousElementSibling.previousElementSibling.previousElementSibling.src
            };
            cartItems.push(product);
            updateCart(product);
        });
    });
</script>
<script>
function updateCart(product) {
	let cartItem = document.createElement('div');
	cartItem.classList.add('cart-item');
	cartItem.innerHTML = `
		<img src="${product.image}" alt="Product">
		<div>
		<h3>${product.title}</h3>
		<p class="price">${product.price}</p>
		<div class="quantity-container">
			<button class="decrement-btn"><</button>
			<input type="text" value="1" class="quantity">
			<button class="increment-btn">></button>
		</div>
		<button class="remove-btn">Remove</button>
		</div>
	`;
  let cartItems = document.querySelector('.cart-items');
  let cartTotal = document.querySelector('.cart-total h3');
  let items = cartItems.getElementsByClassName('cart-item');
  let total = 0;
  for (let i = 0; i < items.length; i++) {
    let itemPrice = parseFloat(items[i].querySelector('.price').textContent.replace('$', ''));
    let itemQuantity = items[i].querySelector('.quantity').value;
    total += itemPrice * itemQuantity;
  }
  total = Math.round(total * 100) / 100;
  cartTotal.textContent = `Total: $${total}`;
  cartItems.append(cartItem);

  let removeBtns = document.querySelectorAll('.remove-btn');
  removeBtns.forEach(function(btn) {
    btn.addEventListener('click', function() {
      btn.parentElement.parentElement.remove();
      updateTotal();
    });
  });

  let quantityInputs = document.querySelectorAll('.quantity');
  quantityInputs.forEach(function(input) {
    updateTotal();
    input.addEventListener('change', function() {
      if (input.value <= 0) {
        input.value = 1;
      }
      updateTotal();
    });
  });

  let incrementBtns = document.querySelectorAll('.increment-btn');
  incrementBtns.forEach(function(btn) {
    btn.addEventListener('click', function() {
      let quantityInput = btn.previousElementSibling;
      let currentQuantity = parseInt(quantityInput.value);
      quantityInput.value = currentQuantity + 1;
      updateTotal();
    });
  });

  let decrementBtns = document.querySelectorAll('.decrement-btn');
  decrementBtns.forEach(function(btn) {
    btn.addEventListener('click', function() {
      let quantityInput = btn.nextElementSibling;
      let currentQuantity = parseInt(quantityInput.value);
      if (currentQuantity > 1) {
        quantityInput.value = currentQuantity - 1;
        updateTotal();
      }
    });
  });

  function updateTotal() {
    let items = cartItems.getElementsByClassName('cart-item');
    let total = 0;
    for (let i = 0; i < items.length; i++) {
      let itemPrice = parseFloat(items[i].querySelector('.price').textContent.replace('$', ''));
      let itemQuantity = items[i].querySelector('.quantity').value;
      total += itemPrice * itemQuantity;
    }
    total = Math.round(total * 100) / 100;
    cartTotal.textContent = `Total: $${total}`;
  }
}


	</script>
</html>